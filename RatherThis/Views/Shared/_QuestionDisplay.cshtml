@model RatherThis.Models.QuestionDisplayViewModel

@if (Model != null)
{
    var genderTag = "FOR EVERYONE";

    if (Model.Gender == "F")
    {
        genderTag = "FOR THE LADIES";
    }
    else if (Model.Gender == "M")
    {
        genderTag = "FOR THE GUYS";
    }
    var optionInputId1 = string.Format("question-{0}-option-{1}", Model.QuestionId, @Model.OptionId1);
    var optionInputId2 = string.Format("question-{0}-option-{1}", Model.QuestionId, @Model.OptionId2);
    var questionContainerId = string.Format("question-container-{0}", Model.QuestionId);
    var ajaxLoaderId = "question-ajax-loading-" + Model.QuestionId;
    
    <div class="question-display">
    @using (Ajax.BeginForm("Answer", "Question", new { qid = Model.QuestionId }, new AjaxOptions
            {
                UpdateTargetId = questionContainerId,
                InsertionMode = InsertionMode.Replace,
                LoadingElementId = ajaxLoaderId
            }))
    {
        
        <span>@Model.Date.ToString("MMM dd yyyy").ToUpper()</span>
        <span>@genderTag</span>
        <h1>would you rather...</h1>
    
        <div>
            
            <input type="radio" name="oid" value="@Model.OptionId1" id="@optionInputId1" />
            <label for="@optionInputId1" >@Model.OptionText1</label>
        </div>
        <div>
            <input type="radio" name="oid" value="@Model.OptionId2" id="@optionInputId2" />
            <label for="@optionInputId2">@Model.OptionText2</label>
        </div>
    
        <p>posted by: @Model.Name</p>
        
        @* display the vote button if user is logged in, otherwise show a call to action link to register or login *@
        if (Model.IsLoggedIn)
        {
        <input type="submit" value="VOTE" />
        }
        else
        {
        <text>Please <a href="javascript:void(0)" onclick="activateLogin()">LOGIN</a> or <a href="javascript:void(0)" onclick="activateRegistration()">REGISTER</a> to Answer</text>
        }
        
    }
    @* only display the skip button if user is logged in *@
    @if (Model.IsLoggedIn)
    {
        using (Ajax.BeginForm("Answer", "Question", new { qid = Model.QuestionId }, new AjaxOptions
                {
                    UpdateTargetId = questionContainerId,
                    InsertionMode = InsertionMode.Replace,
                    LoadingElementId = ajaxLoaderId
                }))
        {
            @* 0 is the value for any questions answered by skipping *@
            <input type="hidden" name="oid" value="0" />
            <input type="submit" value="SKIP" />
        }
    }
    </div>
}